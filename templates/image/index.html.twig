{% extends 'base.html.twig' %}

{% block body %}
	<form action="{{ path('upload') }}" method="post" enctype="multipart/form-data">
		<input type="file" name="file" required>
		<input type="text" name="title" placeholder="Title">
		<input type="text" name="tags" placeholder="tags comma,separated">
		<button>Upload</button>
	</form>

	<form action="{{ path('search') }}" method="get" style="margin:1rem 0">
		<input type="text" name="q" value="{{ q|default('') }}" placeholder="search title (regex/contains)">
		<button>Search</button>
		{% if q is defined and q %}
			<a href="{{ path('home') }}" style="margin-left:8px">clear</a>
		{% endif %}
	</form>


	<div class="grid">
		{% for img in images %}
			<figure>
				<img src="{{ path('file_raw', {id: img.id}) }}" alt="{{ img.title }}">
				<figcaption>
					<strong>{{ img.title }}</strong><br>
					<small>
						{{ img.tags|join(', ') }}
						{% if img.owner %}
							â€” by
							{{ img.owner.email }}
						{% endif %}
					</small>
				</figcaption>
			</figure>
		{% else %}
			<p>No images yet. Upload one above.</p>
		{% endfor %}
	</div>
{% endblock %}
